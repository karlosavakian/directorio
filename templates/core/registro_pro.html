{% extends 'base.html' %}
{% load static %}
{% block content %}
    <div class="container-fluid  px-3 my-5 col-8">
        <div class="mx-auto">
            <p class="text-center text-muted mb-4">Completa los pasos y crea tu perfil profesional.</p>
            <ul class="progress-steps mb-4">
                <li class="step-item active" data-step="1" id="step-label-1">Perfil</li>
                <li class="step-item" data-step="2" id="step-label-2">Plan</li>
                <li class="step-item" data-step="3" id="step-label-3">Datos</li>
            </ul>
            <form method="post" class="profile-form">
                {% csrf_token %}
                {{ form.non_field_errors }}
                <input type="hidden"
                       name="current_step"
                       id="current-step"
                       value="{{ start_step }}">
                <div id="step1" class="step">
                    <div class="mb-3">{{ form.tipo.label }}</div>
                    <p class="text-muted">Indícanos qué tipo de profesional eres.</p>
                    <div class="d-flex justify-content-center flex-wrap gap-3">
                        {% for radio in form.tipo %}
                            <label class="tipo-card">
                                {{ radio.tag }}
                                <div class="fw-medium">{{ radio.choice_label }}</div>
                            </label>
                        {% endfor %}
                    </div>
                    {% if form.tipo.errors %}
                        <div class="invalid-feedback d-block">{{ form.tipo.errors.as_text|striptags }}</div>
                    {% endif %}
                    <button type="button" class="btn btn-dark mt-3" id="next1">Siguiente</button>
                </div>
                <div id="step2" class="step d-none">
                    <div class="mb-3">{{ form.plan.label }}</div>
                    {% include 'core/components/_plan_option_cards.html' %}
                    <div id="payment-section" class="mt-4 d-none">
                        <h3 class="h6 mb-3">Datos de pago</h3>
                        <div class="form-field">
                            <input type="text" name="card_number" id="id_card_number" placeholder=" ">
                            <button type="button" class="clear-btn bi bi-x"></button>
                            <label for="id_card_number">Número de tarjeta</label>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="form-field">
                                    <input type="text"
                                           name="card_expiry"
                                           id="id_card_expiry"
                                           placeholder="MM/AA">
                                    <button type="button" class="clear-btn bi bi-x"></button>
                                    <label for="id_card_expiry">Expiración</label>
                                </div>
                            </div>
                            <div class="col">
                                <div class="form-field">
                                    <input type="text" name="card_cvc" id="id_card_cvc" placeholder=" ">
                                    <button type="button" class="clear-btn bi bi-x"></button>
                                    <label for="id_card_cvc">CVC</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% if form.plan.errors %}
                        <div class="invalid-feedback d-block">{{ form.plan.errors.as_text|striptags }}</div>
                    {% endif %}
                    <button type="button" class="btn btn-outline-dark me-2" id="prev2">Anterior</button>
                    <button type="button" class="btn btn-dark" id="next2">Siguiente</button>
                </div>
                <div id="step3" class="step d-none">
                    <p class="text-muted">Rellena la información de tu perfil.</p>
                    {% include 'core/_pro_register_form.html' with form=pro_form %}
                    <button type="button" class="btn btn-outline-dark me-2" id="prev3">Anterior</button>
                    <button type="submit" class="btn btn-dark">Finalizar</button>
                </div>
            </form>
        </div>
    </div>
{% endblock %}
{% block extra_js %}
    <script src="{% static 'js/pro-registro.js' %}"></script>
{% endblock %}
