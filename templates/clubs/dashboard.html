{% extends 'base.html' %}
{% block content %}
<div class="container py-4">
  <h1 class="h3">Administrar {{ club.name }}</h1>
  <p>
    <a href="{% url 'club_edit' club.slug %}" class="btn btn-primary btn-sm">Editar club</a>
    <a href="{% url 'clase_create' club.slug %}" class="btn btn-secondary btn-sm">Añadir clase</a>
    <a href="{% url 'clubpost_create' club.slug %}" class="btn btn-secondary btn-sm">Nueva publicación</a>
  </p>
  <h2 class="h5 mt-4">Clases</h2>
  <ul>
    {% for c in classes %}
    <li>
      {{ c.nombre }} ({{ c.hora_inicio|time:'H:i' }} - {{ c.hora_fin|time:'H:i' }})
      <a href="{% url 'clase_update' c.id %}">Editar</a>
      <form method="post" action="{% url 'clase_delete' c.id %}" style="display:inline">
        {% csrf_token %}
        <button type="submit" class="btn btn-link p-0">Eliminar</button>
      </form>
    </li>
    {% empty %}
    <li>No hay clases.</li>
    {% endfor %}
  </ul>
  <h2 class="h5 mt-4">Posts</h2>
  <ul>
    {% for p in posts %}
    <li>
      {{ p.titulo }}
      <a href="{% url 'clubpost_update' p.id %}">Editar</a>
      <form method="post" action="{% url 'clubpost_delete' p.id %}" style="display:inline">
        {% csrf_token %}
        <button type="submit" class="btn btn-link p-0">Eliminar</button>
      </form>
    </li>
    {% empty %}
    <li>No hay posts.</li>
    {% endfor %}
  </ul>
  <h2 class="h5 mt-4">Reservas</h2>
  <ul>
    {% for b in bookings %}
    <li>{{ b.user.username }} - {% if b.clase %}{{ b.clase.nombre }}{% else %}{{ b.evento.titulo }}{% endif %} ({{ b.status }})</li>
    {% empty %}
    <li>No hay reservas.</li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
