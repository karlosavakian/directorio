{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container-fluid px-3 my-5 col-8">
    <div class="d-flex justify-content-between align-items-center mb-3">
        {% include 'partials/_back-btn.html' %}
    </div>
    <h1 class="text-center mb-3">Gestiona tu plan</h1>
    <p class="text-center text-muted mb-5">Selecciona el plan que prefieras.</p>
    <form method="post" class="text-center">
        {% csrf_token %}
        {% if form.plan.errors %}
        <div class="invalid-feedback d-block mb-3">{{ form.plan.errors.as_text|striptags }}</div>
        {% endif %}
        <div class="d-flex justify-content-center flex-wrap gap-3 mb-4">
            {% for p in plans %}
            <label class="plan-card {% if p.featured %}featured{% endif %}{% if current_plan == p.value %} active{% endif %}">
                <input type="radio" name="plan" value="{{ p.value }}" {% if current_plan == p.value %}checked{% endif %}>
                <h3 class="mb-2">{{ p.title }}</h3>
                <ul>
                    {% for f in p.features %}
                    <li>{{ f }}</li>
                    {% endfor %}
                </ul>
                <div class="plan-card-price">{{ p.price }}</div>
                {% if current_plan == p.value %}
                <span class="badge bg-dark position-absolute top-0 end-0 m-2">Actual</span>
                {% endif %}
            </label>
            {% endfor %}
        </div>
        <button type="submit" class="btn btn-dark">Guardar plan</button>
    </form>
</div>
{% endblock %}
